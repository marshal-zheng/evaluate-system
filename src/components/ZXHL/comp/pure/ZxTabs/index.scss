// ZxTabs 标签页组件样式
// 基于 Element Plus 的增强标签页组件样式

// CSS 变量定义
:root {
  // 基础颜色
  --zx-tabs-primary-color: #409eff;
  --zx-tabs-text-color: #303133;
  --zx-tabs-text-color-secondary: #606266;
  --zx-tabs-border-color: #e4e7ed;
  --zx-tabs-background-color: #ffffff;
  
  // 标签页相关
  --zx-tabs-header-height: 40px;
  --zx-tabs-content-padding: 20px;
  --zx-tabs-border-radius: 4px;
  
  // 拖拽相关
  --zx-tabs-drag-cursor: grab;
  --zx-tabs-drag-active-cursor: grabbing;
  --zx-tabs-drag-opacity: 0.8;
  
  // 加载状态
  --zx-tabs-loading-color: #909399;
  --zx-tabs-loading-bg: rgba(255, 255, 255, 0.9);
  
  // 动画
  --zx-tabs-transition-duration: 0.3s;
  --zx-tabs-transition-timing: ease;
  
  // 间距
  --zx-tabs-gap: 8px;
  --zx-tabs-padding-horizontal: 16px;
  --zx-tabs-padding-vertical: 8px;
}

// 暗色主题
[data-theme="dark"] {
  --zx-tabs-text-color: #e4e7ed;
  --zx-tabs-text-color-secondary: #c0c4cc;
  --zx-tabs-border-color: #4c4d4f;
  --zx-tabs-background-color: #1d1e1f;
  --zx-tabs-loading-bg: rgba(29, 30, 31, 0.9);
}

// 主组件样式
.zx-tabs {
  width: 100%;
  
  // Element Plus 标签页基础样式覆盖
  :deep(.el-tabs__header) {
    margin: 0 0 var(--zx-tabs-gap) 0;
    
    .el-tabs__nav-wrap {
      &::after {
        background-color: var(--zx-tabs-border-color);
      }
    }
    
    .el-tabs__nav {
      .el-tabs__item {
        height: var(--zx-tabs-header-height);
        line-height: var(--zx-tabs-header-height);
        padding: 0 var(--zx-tabs-padding-horizontal);
        color: var(--zx-tabs-text-color-secondary);
        transition: all var(--zx-tabs-transition-duration) var(--zx-tabs-transition-timing);
        
        &:hover {
          color: var(--zx-tabs-primary-color);
        }
        
        &.is-active {
          color: var(--zx-tabs-primary-color);
        }
        
        &.is-disabled {
          color: var(--el-text-color-disabled);
          cursor: not-allowed;
        }
      }
      
      .el-tabs__active-bar {
        background-color: var(--zx-tabs-primary-color);
      }
    }
    
    // 新增和关闭按钮
    .el-tabs__new-tab {
      color: var(--zx-tabs-text-color-secondary);
      
      &:hover {
        color: var(--zx-tabs-primary-color);
      }
    }
  }
  
  // 内容区域
  :deep(.el-tabs__content) {
    .el-tab-pane {
      // 基础内容样式在这里可以自定义
    }
  }
  
  // 拖拽功能样式
  &.zx-tabs-draggable {
    :deep(.el-tabs__item) {
      cursor: var(--zx-tabs-drag-cursor);
      user-select: none;
      
      &:active {
        cursor: var(--zx-tabs-drag-active-cursor);
      }
      
      &.is-dragging {
        opacity: var(--zx-tabs-drag-opacity);
        transform: scale(0.95);
      }
    }
  }
  
  // URL同步标识
  &.zx-tabs-url-sync {
    :deep(.el-tabs__item.is-active) {
      position: relative;
      
      &::after {
        content: '';
        position: absolute;
        top: 2px;
        right: 4px;
        width: 4px;
        height: 4px;
        background-color: var(--zx-tabs-primary-color);
        border-radius: 50%;
        opacity: 0.6;
      }
    }
  }
}

// 标签页内容样式
.zx-tabs-content {
  min-height: 200px;
  padding: var(--zx-tabs-content-padding);
  background-color: var(--zx-tabs-background-color);
  border-radius: var(--zx-tabs-border-radius);
  transition: all var(--zx-tabs-transition-duration) var(--zx-tabs-transition-timing);
  
  // 内容淡入动画
  animation: zx-tabs-content-fade-in var(--zx-tabs-transition-duration) var(--zx-tabs-transition-timing);
}

// 加载状态样式
.zx-tabs-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 120px;
  color: var(--zx-tabs-loading-color);
  background-color: var(--zx-tabs-loading-bg);
  border-radius: var(--zx-tabs-border-radius);
  
  .el-icon {
    font-size: 24px;
    margin-bottom: var(--zx-tabs-gap);
  }
  
  span {
    font-size: 14px;
  }
}

// 动画定义
@keyframes zx-tabs-content-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 卡片类型样式增强
.zx-tabs {
  &.el-tabs--card {
    :deep(.el-tabs__header) {
      .el-tabs__item {
        border: 1px solid var(--zx-tabs-border-color);
        border-bottom: none;
        border-radius: var(--zx-tabs-border-radius) var(--zx-tabs-border-radius) 0 0;
        background-color: var(--el-fill-color-light);
        
        &.is-active {
          background-color: var(--zx-tabs-background-color);
          border-color: var(--zx-tabs-primary-color);
        }
      }
    }
  }
  
  &.el-tabs--border-card {
    border: 1px solid var(--zx-tabs-border-color);
    border-radius: var(--zx-tabs-border-radius);
    
    :deep(.el-tabs__content) {
      padding: var(--zx-tabs-content-padding);
    }
  }
}

// 响应式设计
@media (max-width: 768px) {
  .zx-tabs {
    :deep(.el-tabs__header) {
      .el-tabs__item {
        padding: 0 12px;
        font-size: 14px;
      }
    }
  }
  
  .zx-tabs-content {
    padding: 16px;
  }
}

@media (max-width: 480px) {
  .zx-tabs {
    :deep(.el-tabs__header) {
      .el-tabs__item {
        padding: 0 8px;
        font-size: 13px;
      }
    }
  }
  
  .zx-tabs-content {
    padding: 12px;
  }
}

// 垂直标签页样式
.zx-tabs {
  &.el-tabs--left,
  &.el-tabs--right {
    :deep(.el-tabs__header) {
      .el-tabs__item {
        text-align: left;
        padding: var(--zx-tabs-padding-vertical) var(--zx-tabs-padding-horizontal);
      }
    }
  }
}

// 可编辑标签页样式
.zx-tabs {
  :deep(.el-tabs__item) {
    .el-icon-close {
      margin-left: 6px;
      border-radius: 50%;
      transition: all var(--zx-tabs-transition-duration) var(--zx-tabs-transition-timing);
      
      &:hover {
        background-color: var(--el-color-danger);
        color: #fff;
      }
    }
  }
}

// 拉伸样式
.zx-tabs {
  &.el-tabs--stretch {
    :deep(.el-tabs__nav) {
      .el-tabs__item {
        flex: 1;
        text-align: center;
      }
    }
  }
}