import{r,v as Z,Y as K,o as c,c as h,b as n,K as q,w as i,a as l,a0 as A,e as U,t as f,d as w,aK as H,i as F,J as k,aE as Q,aL as X,a3 as G,L as ee,a8 as le,aB as te,ah as ae,ag as oe,aG as se,O as x,f as ne,E as W,aM as de,au as ue,_ as ie,ad as re}from"./index-b28d76a3.js";/* empty css                  *//* empty css                    */const pe={class:"zx-upload"},me={key:0,class:"zx-upload-dragger"},ce={class:"zx-upload-icon"},fe={class:"zx-upload-text"},ve={class:"zx-upload-main-text"},xe={key:0,class:"zx-upload-sub-text"},ge={class:"el-upload__tip"},ye={key:0,class:"zx-upload-file-list"},be={class:"zx-upload-file-info"},we=["title"],he={class:"zx-upload-file-size"},Ve={class:"zx-upload-file-actions"},ze={class:"zx-upload-file-buttons"},v={__name:"index",props:{modelValue:{type:Array,default:()=>[]},action:{type:String,default:""},headers:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},accept:{type:String,default:"*"},limit:{type:Number,default:void 0},maxSize:{type:Number,default:10*1024*1024},listType:{type:String,default:"text",validator:s=>["text","picture","picture-card"].includes(s)},drag:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!0},customFileList:{type:Boolean,default:!1},mainText:{type:String,default:""},subText:{type:String,default:""},buttonText:{type:String,default:""},tipText:{type:String,default:""},showSubText:{type:Boolean,default:!0},showTip:{type:Boolean,default:!0},autoUpload:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},allowPreview:{type:Boolean,default:!0},allowDownload:{type:Boolean,default:!0},allowRemove:{type:Boolean,default:!0},beforeUpload:{type:Function,default:null},beforeRemove:{type:Function,default:null},size:{type:String,default:"default",validator:s=>["large","default","small"].includes(s)}},emits:["update:modelValue","change","preview","remove","success","error","progress","exceed","download"],setup(s,{expose:C,emit:S}){const u=s,p=S,g=r(),m=r([...u.modelValue]),B=Z(()=>["zx-upload-wrapper","zx-upload--".concat(u.size),{"zx-upload--drag":u.drag,"zx-upload--disabled":u.disabled,"zx-upload--custom-list":u.customFileList}]);K(()=>u.modelValue,t=>{m.value=[...t]},{deep:!0}),K(m,t=>{p("update:modelValue",t),p("change",t)},{deep:!0});const y=t=>t<1024?t+"B":t<1024*1024?Math.round(t/1024)+"KB":Math.round(t/(1024*1024))+"MB",T=t=>t?y(t):"",b=t=>{p("preview",t)},V=t=>{if(!u.allowRemove)return;const d=()=>{const a=m.value.findIndex(e=>e.uid===t.uid);a>-1&&m.value.splice(a,1),p("remove",t)};if(u.beforeRemove){const a=u.beforeRemove(t);a&&typeof a.then=="function"?a.then(d):a!==!1&&d()}else d()},$=(t,d,a)=>{p("success",t,d,a)},_=(t,d,a)=>{x.error("文件上传失败"),p("error",t,d,a)},R=(t,d,a)=>{p("progress",t,d,a)},L=(t,d)=>{m.value=d},N=t=>{if(t.size>u.maxSize)return x.error("文件大小不能超过 ".concat(y(u.maxSize))),!1;if(u.accept&&u.accept!=="*"){const d=u.accept.split(","),a=t.type,e=t.name,z=e.substring(e.lastIndexOf(".")+1).toLowerCase();if(!d.some(o=>(o=o.trim(),o.startsWith(".")?o.substring(1).toLowerCase()===z:a.includes(o))))return x.error("不支持的文件类型，请上传 ".concat(u.accept," 格式的文件")),!1}return u.beforeUpload?u.beforeUpload(t):!0},O=t=>u.beforeRemove?u.beforeRemove(t):!0,P=(t,d)=>{x.warning("最多只能上传 ".concat(u.limit," 个文件")),p("exceed",t,d)},D=t=>{if(t.url){const d=document.createElement("a");d.href=t.url,d.download=t.name,d.click()}p("download",t)};return C({submit:()=>{var t;(t=g.value)==null||t.submit()},clearFiles:()=>{var t;(t=g.value)==null||t.clearFiles(),m.value=[]},abort:t=>{var d;(d=g.value)==null||d.abort(t)}}),(t,d)=>{const a=ne,e=W,z=de,E=ue;return c(),h("div",pe,[n(z,{ref_key:"uploadRef",ref:g,"file-list":m.value,"onUpdate:fileList":d[0]||(d[0]=o=>m.value=o),class:G(B.value),action:s.action,headers:s.headers,data:s.data,name:s.name,"with-credentials":s.withCredentials,multiple:s.multiple,accept:s.accept,"on-preview":b,"on-remove":V,"on-success":$,"on-error":_,"on-progress":R,"on-change":L,"before-upload":N,"before-remove":O,"list-type":s.listType,"auto-upload":s.autoUpload,disabled:s.disabled,limit:s.limit,"on-exceed":P,drag:s.drag,"show-file-list":s.showFileList},q({default:i(()=>[s.drag?(c(),h("div",me,[l("div",ce,[n(a,{class:"zx-upload-icon-inner"},{default:i(()=>[n(w(H))]),_:1})]),l("div",fe,[l("div",ve,f(s.mainText||"将文件拖到此处，或点击上传"),1),s.showSubText?(c(),h("div",xe,[A(t.$slots,"tip",{},()=>[U(f(s.subText||"支持 ".concat(s.accept||"*"," 格式，单个文件不超过 ").concat(y(s.maxSize))),1)])])):F("",!0)])])):s.listType==="picture-card"?(c(),k(a,{key:1},{default:i(()=>[n(w(Q))]),_:1})):(c(),k(e,{key:2,type:"primary",disabled:s.disabled},{default:i(()=>[n(a,null,{default:i(()=>[n(w(X))]),_:1}),U(" "+f(s.buttonText||"选择文件"),1)]),_:1},8,["disabled"]))]),_:2},[!s.drag&&s.showTip?{name:"tip",fn:i(()=>[l("div",ge,[A(t.$slots,"tip",{},()=>[U(f(s.tipText||"支持 ".concat(s.accept||"*"," 格式，单个文件不超过 ").concat(y(s.maxSize))),1)])])]),key:"0"}:void 0]),1032,["file-list","class","action","headers","data","name","with-credentials","multiple","accept","list-type","auto-upload","disabled","limit","drag","show-file-list"]),s.customFileList&&s.showFileList?(c(),h("div",ye,[(c(!0),h(ee,null,le(m.value,(o,Y)=>(c(),h("div",{key:o.uid||Y,class:G(["zx-upload-file-item",{"is-success":o.status==="success","is-error":o.status==="error","is-uploading":o.status==="uploading"}])},[l("div",be,[n(a,{class:"zx-upload-file-icon"},{default:i(()=>[n(w(te))]),_:1}),l("span",{class:"zx-upload-file-name",title:o.name},f(o.name),9,we),l("span",he,f(T(o.size)),1)]),l("div",Ve,[o.status==="uploading"?(c(),k(E,{key:0,percentage:o.percentage||0,"show-text":!1,class:"zx-upload-progress"},null,8,["percentage"])):F("",!0),l("div",ze,[o.status==="success"&&s.allowPreview?(c(),k(e,{key:0,type:"text",size:"small",onClick:j=>b(o)},{default:i(()=>[n(a,null,{default:i(()=>[n(w(ae))]),_:1})]),_:1},8,["onClick"])):F("",!0),o.status==="success"&&s.allowDownload?(c(),k(e,{key:1,type:"text",size:"small",onClick:j=>D(o)},{default:i(()=>[n(a,null,{default:i(()=>[n(w(oe))]),_:1})]),_:1},8,["onClick"])):F("",!0),n(e,{type:"text",size:"small",disabled:s.disabled,onClick:j=>V(o)},{default:i(()=>[n(a,null,{default:i(()=>[n(w(se))]),_:1})]),_:1},8,["disabled","onClick"])])])],2))),128))])):F("",!0)])}}};const Ce={class:"zx-upload-example"},Se={class:"example-section"},$e={class:"example-demo"},Fe={class:"example-code"},ke={class:"example-section"},Ue={class:"example-demo"},Be={class:"example-code"},Te={class:"example-section"},_e={class:"example-demo"},Ee={class:"example-code"},Re={class:"example-section"},Le={class:"example-demo"},Ne={class:"example-code"},Oe={class:"example-section"},Pe={class:"example-demo"},De={class:"example-code"},Je={class:"example-section"},Me={class:"example-demo"},Ie={class:"size-demo"},je={class:"size-item"},Ke={class:"size-item"},Ae={class:"size-item"},Ge={class:"example-section"},We={class:"example-demo"},Ye={class:"example-section"},Ze={class:"example-demo"},qe={class:"manual-buttons"},He={class:"example-code"},Qe=["src"],Xe={__name:"example",setup(s){const C=r([]),S=r([]),u=r([]),p=r([]),g=r([]),m=r([]),B=r([]),y=r([]),T=r([]),b=r([]),V=r(),$=r(!1),_=r(""),R=a=>{console.log("基础上传文件变化:",a)},L=a=>{console.log("拖拽上传文件变化:",a)},N=a=>{console.log("多文件上传变化:",a)},O=a=>{console.log("图片上传变化:",a)},P=a=>{console.log("自定义列表文件变化:",a)},D=a=>{console.log("手动上传文件变化:",a)},M=(a,e)=>{x.warning("文件数量超出限制"),console.log("超出限制:",a,e)},J=a=>{console.log("预览文件:",a),a.url?(_.value=a.url,$.value=!0):x.info("该文件暂无预览")},I=a=>{console.log("下载文件:",a),x.success("开始下载文件")},t=()=>{var a;(a=V.value)==null||a.submit(),x.success("开始上传文件")},d=()=>{var a;(a=V.value)==null||a.clearFiles(),x.info("已清空文件列表")};return(a,e)=>{const z=W,E=re;return c(),h("div",Ce,[e[38]||(e[38]=l("div",{class:"example-header"},[l("h1",null,"ZxUpload 文件上传组件"),l("p",null,"基于 Element Plus 的文件上传组件，支持拖拽上传、多文件上传、文件预览等功能。")],-1)),l("div",Se,[e[12]||(e[12]=l("h2",null,"基础用法",-1)),e[13]||(e[13]=l("p",null,"最简单的文件上传，点击选择文件。",-1)),l("div",$e,[n(v,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=o=>C.value=o),action:"/api/upload","auto-upload":!1,onChange:R},null,8,["modelValue"])]),l("div",Fe,[e[11]||(e[11]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(C.value,null,2)),1)])]),l("div",ke,[e[15]||(e[15]=l("h2",null,"拖拽上传",-1)),e[16]||(e[16]=l("p",null,"支持拖拽文件到指定区域进行上传。",-1)),l("div",Ue,[n(v,{modelValue:S.value,"onUpdate:modelValue":e[1]||(e[1]=o=>S.value=o),action:"/api/upload",drag:!0,"auto-upload":!1,"main-text":"拖拽文件到此处上传","sub-text":"支持单个或批量上传，严禁上传公司数据或其他敏感信息",onChange:L},null,8,["modelValue"])]),l("div",Be,[e[14]||(e[14]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(S.value,null,2)),1)])]),l("div",Te,[e[18]||(e[18]=l("h2",null,"多文件上传",-1)),e[19]||(e[19]=l("p",null,"支持同时选择多个文件进行上传。",-1)),l("div",_e,[n(v,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=o=>u.value=o),action:"/api/upload",multiple:!0,limit:5,"auto-upload":!1,accept:".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx","max-size":5*1024*1024,onChange:N,onExceed:M},null,8,["modelValue"])]),l("div",Ee,[e[17]||(e[17]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(u.value,null,2)),1)])]),l("div",Re,[e[21]||(e[21]=l("h2",null,"图片上传",-1)),e[22]||(e[22]=l("p",null,"专门用于图片上传的卡片式布局。",-1)),l("div",Le,[n(v,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=o=>p.value=o),action:"/api/upload","list-type":"picture-card",multiple:!0,limit:3,accept:"image/*","max-size":2*1024*1024,"auto-upload":!1,onChange:O,onPreview:J},null,8,["modelValue"])]),l("div",Ne,[e[20]||(e[20]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(p.value,null,2)),1)])]),l("div",Oe,[e[24]||(e[24]=l("h2",null,"自定义文件列表",-1)),e[25]||(e[25]=l("p",null,"使用自定义的文件列表样式，提供更多操作按钮。",-1)),l("div",Pe,[n(v,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=o=>g.value=o),action:"/api/upload",drag:!0,multiple:!0,"custom-file-list":!0,"allow-preview":!0,"allow-download":!0,"auto-upload":!1,onChange:P,onPreview:J,onDownload:I},null,8,["modelValue"])]),l("div",De,[e[23]||(e[23]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(g.value,null,2)),1)])]),l("div",Je,[e[29]||(e[29]=l("h2",null,"不同尺寸",-1)),e[30]||(e[30]=l("p",null,"提供大、中、小三种尺寸的上传组件。",-1)),l("div",Me,[l("div",Ie,[l("div",je,[e[26]||(e[26]=l("h4",null,"大尺寸",-1)),n(v,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=o=>m.value=o),action:"/api/upload",drag:!0,size:"large","auto-upload":!1},null,8,["modelValue"])]),l("div",Ke,[e[27]||(e[27]=l("h4",null,"默认尺寸",-1)),n(v,{modelValue:B.value,"onUpdate:modelValue":e[6]||(e[6]=o=>B.value=o),action:"/api/upload",drag:!0,size:"default","auto-upload":!1},null,8,["modelValue"])]),l("div",Ae,[e[28]||(e[28]=l("h4",null,"小尺寸",-1)),n(v,{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=o=>y.value=o),action:"/api/upload",drag:!0,size:"small","auto-upload":!1},null,8,["modelValue"])])])])]),l("div",Ge,[e[31]||(e[31]=l("h2",null,"禁用状态",-1)),e[32]||(e[32]=l("p",null,"禁用文件上传功能。",-1)),l("div",We,[n(v,{modelValue:T.value,"onUpdate:modelValue":e[8]||(e[8]=o=>T.value=o),action:"/api/upload",drag:!0,disabled:!0,"auto-upload":!1},null,8,["modelValue"])])]),l("div",Ye,[e[36]||(e[36]=l("h2",null,"手动上传",-1)),e[37]||(e[37]=l("p",null,"选择文件后，手动触发上传。",-1)),l("div",Ze,[n(v,{ref_key:"manualUploadRef",ref:V,modelValue:b.value,"onUpdate:modelValue":e[9]||(e[9]=o=>b.value=o),action:"/api/upload","auto-upload":!1,multiple:!0,onChange:D},null,8,["modelValue"]),l("div",qe,[n(z,{type:"primary",onClick:t,disabled:b.value.length===0},{default:i(()=>[...e[33]||(e[33]=[U(" 开始上传 ",-1)])]),_:1},8,["disabled"]),n(z,{onClick:d},{default:i(()=>[...e[34]||(e[34]=[U(" 清空文件 ",-1)])]),_:1})])]),l("div",He,[e[35]||(e[35]=l("h4",null,"当前文件列表：",-1)),l("pre",null,f(JSON.stringify(b.value,null,2)),1)])]),n(E,{modelValue:$.value,"onUpdate:modelValue":e[10]||(e[10]=o=>$.value=o),title:"图片预览",width:"50%"},{default:i(()=>[l("img",{src:_.value,alt:"预览图片",style:{width:"100%",height:"auto"}},null,8,Qe)]),_:1},8,["modelValue"])])}}},al=ie(Xe,[["__scopeId","data-v-40f89e2a"]]);export{al as default};
